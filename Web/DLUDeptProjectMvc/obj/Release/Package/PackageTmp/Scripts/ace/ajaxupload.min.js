(function(){function n(n,t,i){if(n.addEventListener)n.addEventListener(t,i,!1);else if(n.attachEvent)n.attachEvent("on"+t,function(){i.call(n)});else throw new Error("not supported or DOM not loaded");}function c(n){var t,r,i,u,e=f(n);return t=e.left,i=e.top,r=t+n.offsetWidth,u=i+n.offsetHeight,{left:t,right:r,top:i,bottom:u}}function r(n,t){for(var i in t)t.hasOwnProperty(i)&&(n.style[i]=t[i])}function l(n,t){var i=c(n);r(t,{position:"absolute",left:i.left+"px",top:i.top+"px",width:n.offsetWidth+"px",height:n.offsetHeight+"px"})}function o(n){return n.replace(/.*(\/|\\)/,"")}function s(n){return-1!==n.indexOf(".")?n.replace(/.*[.]/,""):""}function a(n,t){var i=new RegExp("\\b"+t+"\\b");return i.test(n.className)}function h(n,t){a(n,t)||(n.className+=" "+t)}function i(n,t){var i=new RegExp("\\b"+t+"\\b");n.className=n.className.replace(i,"")}function t(n){n.parentNode.removeChild(n)}var f,u,e;f=document.documentElement.getBoundingClientRect?function(n){var f=n.getBoundingClientRect(),e=n.ownerDocument,i=e.body,r=e.documentElement,o=r.clientTop||i.clientTop||0,s=r.clientLeft||i.clientLeft||0,t=1,u,h,c;return i.getBoundingClientRect&&(u=i.getBoundingClientRect(),t=(u.right-u.left)/i.clientWidth),t>1&&(o=0,s=0),h=f.top/t+(window.pageYOffset||r&&r.scrollTop/t||i.scrollTop/t)-o,c=f.left/t+(window.pageXOffset||r&&r.scrollLeft/t||i.scrollLeft/t)-s,{top:h,left:c}}:function(n){var t=0,i=0;do t+=n.offsetTop||0,i+=n.offsetLeft||0,n=n.offsetParent;while(n);return{left:i,top:t}};u=function(){var n=document.createElement("div");return function(t){n.innerHTML=t;var i=n.firstChild;return n.removeChild(i)}}();e=function(){var n=0;return function(){return"ValumsAjaxUpload"+n++}}();window.AjaxUpload=function(t,i){this._settings={action:"upload.php",name:"userfile",data:{},autoSubmit:!0,responseType:!1,hoverClass:"hover",disabledClass:"disabled",onChange:function(){},onSubmit:function(){},onComplete:function(){}};for(var r in i)i.hasOwnProperty(r)&&(this._settings[r]=i[r]);if(t.jquery?t=t[0]:typeof t=="string"&&(/^#.*/.test(t)&&(t=t.slice(1)),t=document.getElementById(t)),!t||t.nodeType!==1)throw new Error("Please make sure that you're passing a valid element");t.nodeName.toUpperCase()=="A"&&n(t,"click",function(n){n&&n.preventDefault?n.preventDefault():window.event&&(window.event.returnValue=!1)});this._button=t;this._input=null;this._disabled=!1;this.enable();this._rerouteClicks()};AjaxUpload.prototype={setData:function(n){this._settings.data=n},disable:function(){h(this._button,this._settings.disabledClass);this._disabled=!0;var n=this._button.nodeName.toUpperCase();(n=="INPUT"||n=="BUTTON")&&this._button.setAttribute("disabled","disabled");this._input&&(this._input.parentNode.style.visibility="hidden")},enable:function(){i(this._button,this._settings.disabledClass);this._button.removeAttribute("disabled");this._disabled=!1},_createInput:function(){var u=this,t=document.createElement("input"),f;if(t.setAttribute("type","file"),t.setAttribute("name",this._settings.name),r(t,{position:"absolute",right:0,margin:0,padding:0,fontSize:"480px",cursor:"pointer"}),f=document.createElement("div"),r(f,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,direction:"ltr",zIndex:2147483583}),f.style.opacity!=="0"){if(typeof f.filters=="undefined")throw new Error("Opacity not supported by the browser");f.style.filter="alpha(opacity=0)"}n(t,"change",function(){if(t&&t.value!==""){var n=o(t.value);if(!1===u._settings.onChange.call(u,n,s(n))){u._clearInput();return}u._settings.autoSubmit&&u.submit()}});n(t,"mouseover",function(){h(u._button,u._settings.hoverClass)});n(t,"mouseout",function(){i(u._button,u._settings.hoverClass);t.parentNode.style.visibility="hidden"});f.appendChild(t);document.body.appendChild(f);this._input=t},_clearInput:function(){this._input&&(t(this._input.parentNode),this._input=null,this._createInput(),i(this._button,this._settings.hoverClass))},_rerouteClicks:function(){var t=this;n(t._button,"mouseover",function(){if(!t._disabled){t._input||t._createInput();var n=t._input.parentNode;l(t._button,n);n.style.visibility="visible"}})},_createIframe:function(){var t=e(),n=u('<iframe src="javascript:false;" name="'+t+'" />');return n.setAttribute("id",t),n.style.display="none",document.body.appendChild(n),n},_createForm:function(n){var r=this._settings,t=u('<form method="post" enctype="multipart/form-data"><\/form>'),f,i;t.setAttribute("action",r.action);t.setAttribute("target",n.name);t.style.display="none";document.body.appendChild(t);for(f in r.data)r.data.hasOwnProperty(f)&&(i=document.createElement("input"),i.setAttribute("type","hidden"),i.setAttribute("name",f),i.setAttribute("value",r.data[f]),t.appendChild(i));return t},_getResponse:function(i,r){var f=!1,e=this,u=this._settings;n(i,"load",function(){var doc,response;if(i.src=="javascript:'%3Chtml%3E%3C/html%3E';"||i.src=="javascript:'<html><\/html>';"){f&&setTimeout(function(){t(i)},0);return}(doc=i.contentDocument?i.contentDocument:window.frames[i.id].document,doc.readyState&&doc.readyState!="complete")||doc.body&&doc.body.innerHTML=="false"||(doc.XMLDocument?response=doc.XMLDocument:doc.body?(response=doc.body.innerHTML,u.responseType&&u.responseType.toLowerCase()=="json"&&(doc.body.firstChild&&doc.body.firstChild.nodeName.toUpperCase()=="PRE"&&(response=doc.body.firstChild.firstChild.nodeValue),response=response?eval("("+response+")"):{})):response=doc,u.onComplete.call(e,r,response),f=!0,i.src="javascript:'<html><\/html>';")})},submit:function(){var f=this,e=this._settings,r,u,n;if(this._input&&this._input.value!==""){if(r=o(this._input.value),!1===e.onSubmit.call(this,r,s(r))){this._clearInput();return}u=this._createIframe();n=this._createForm(u);t(this._input.parentNode);i(f._button,f._settings.hoverClass);n.appendChild(this._input);n.submit();t(n);n=null;t(this._input);this._input=null;this._getResponse(u,r);this._createInput()}}}})();
/*
//# sourceMappingURL=ajaxupload.min.js.map
*/